package org.drift.post;

import org.drift.common.util.BatchMapperUtils;
import org.drift.post.bean.Post;
import org.drift.post.mapper.PostMapper;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

import java.time.Instant;
import java.time.LocalDate;
import java.time.ZoneId;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.UUID;

/**
 * @author jiakui_zeng
 * @date 2025/2/9 17:32
 */
@SpringBootTest
public class PostTest {
    @Test
    void test() {
        // String s = "1888521120593707009," +
        //         "1888521120681787393," +
        //         "1888521120681787394," +
        //         "1888521120681787395," +
        //         "1888521120690176002," +
        //         "1888521120694370305," +
        //         "1888521120694370306," +
        //         "1888521120698564609," +
        //         "1888521120702758913," +
        //         "1888521120702758914," +
        //         "1888521120711147522," +
        //         "1888521120715341825," +
        //         "1888521120715341826," +
        //         "1888521120719536129," +
        //         "1888521120719536130," +
        //         "1888521120723730434," +
        //         "1888521120723730435," +
        //         "1888521120723730436," +
        //         "1888521120723730437," +
        //         "1888521120732119041," +
        //         "1888521120732119042," +
        //         "1888521120740507649," +
        //         "1888521120740507650," +
        //         "1888521120740507651," +
        //         "1888521120744701953," +
        //         "1888521120748896257," +
        //         "1888521120748896258," +
        //         "1888521120748896259," +
        //         "1888521120748896260," +
        //         "1888521120757284866," +
        //         "1888521120757284867," +
        //         "1888521120757284868," +
        //         "1888521120761479170," +
        //         "1888521120761479171," +
        //         "1888521120765673473," +
        //         "1888521120765673474," +
        //         "1888521120769867778," +
        //         "1888521120769867779," +
        //         "1888521120769867780," +
        //         "1888521120769867781," +
        //         "1888521120769867782," +
        //         "1888521120778256385," +
        //         "1888521120795033602," +
        //         "1888521120795033603," +
        //         "1888521120803422210," +
        //         "1888521120803422211," +
        //         "1888521120803422212," +
        //         "1888521120803422213," +
        //         "1888521120803422214," +
        //         "1888521120811810817," +
        //         "1888521120816005122," +
        //         "1888521120816005123," +
        //         "1888521120816005124," +
        //         "1888521120816005125," +
        //         "1888521120816005126," +
        //         "1888521120824393730," +
        //         "1888521120824393731," +
        //         "1888521120824393732," +
        //         "1888521120824393733," +
        //         "1888521120832782337," +
        //         "1888521120832782338," +
        //         "1888521120832782339," +
        //         "1888521120832782340," +
        //         "1888521120845365250," +
        //         "1888521120849559554," +
        //         "1888521120849559555," +
        //         "1888521120849559556," +
        //         "1888521120853753858," +
        //         "1888521120857948162," +
        //         "1888521120857948163," +
        //         "1888521120857948164," +
        //         "1888521120866336770," +
        //         "1888521120866336771," +
        //         "1888521120866336772," +
        //         "1888521120874725378," +
        //         "1888521120874725379," +
        //         "1888521120883113986," +
        //         "1888521120883113987," +
        //         "1888521120883113988," +
        //         "1888521120883113989," +
        //         "1888521120883113990," +
        //         "1888521120891502594," +
        //         "1888521120891502595," +
        //         "1888521120895696898," +
        //         "1888521120895696899," +
        //         "1888521120895696900," +
        //         "1888521120895696901," +
        //         "1888521120899891202," +
        //         "1888521120899891203," +
        //         "1888521120904085505," +
        //         "1888521120904085506," +
        //         "1888521120904085507," +
        //         "1888521120908279809," +
        //         "1888521120908279810," +
        //         "1888521120912474113," +
        //         "1888521120912474114," +
        //         "1888521120912474115," +
        //         "1888521120920862721," +
        //         "1888521120920862722," +
        //         "1888521120925057025";
        String s = "1889670476523081729," +
                "1889670476565024770," +
                "1889670476565024771," +
                "1889670476565024772," +
                "1889670476565024773," +
                "1889670476569219074," +
                "1889670476569219075," +
                "1889670476569219076," +
                "1889670476569219077," +
                "1889670476569219078," +
                "1889670476573413377," +
                "1889670476573413378," +
                "1889670476573413379," +
                "1889670476577607682," +
                "1889670476577607683," +
                "1889670476577607684," +
                "1889670476577607685," +
                "1889670476577607686," +
                "1889670476577607687," +
                "1889670476581801986," +
                "1889670476581801987," +
                "1889670476581801988," +
                "1889670476581801989," +
                "1889670476581801990," +
                "1889670476581801991," +
                "1889670476581801992," +
                "1889670476585996290," +
                "1889670476585996291," +
                "1889670476585996292," +
                "1889670476585996293," +
                "1889670476585996294," +
                "1889670476585996295," +
                "1889670476585996296," +
                "1889670476590190593," +
                "1889670476590190594," +
                "1889670476590190595," +
                "1889670476590190596," +
                "1889670476590190597," +
                "1889670476590190598," +
                "1889670476590190599," +
                "1889670476590190600," +
                "1889670476594384898," +
                "1889670476594384899," +
                "1889670476594384900," +
                "1889670476598579201," +
                "1889670476598579202," +
                "1889670476598579203," +
                "1889670476598579204," +
                "1889670476598579205," +
                "1889670476598579206," +
                "1889670476598579207," +
                "1889670476598579208," +
                "1889670476598579209," +
                "1889670476602773505," +
                "1889670476602773506," +
                "1889670476602773507," +
                "1889670476602773508," +
                "1889670476602773509," +
                "1889670476602773510," +
                "1889670476602773511," +
                "1889670476606967810," +
                "1889670476606967811," +
                "1889670476606967812," +
                "1889670476606967813," +
                "1889670476606967814," +
                "1889670476606967815," +
                "1889670476606967816," +
                "1889670476606967817," +
                "1889670476606967818," +
                "1889670476606967819," +
                "1889670476606967820," +
                "1889670476611162114," +
                "1889670476611162115," +
                "1889670476611162116," +
                "1889670476611162117," +
                "1889670476611162118," +
                "1889670476611162119," +
                "1889670476611162120," +
                "1889670476611162121," +
                "1889670476611162122," +
                "1889670476611162123," +
                "1889670476611162124," +
                "1889670476619550721," +
                "1889670476619550722," +
                "1889670476619550723," +
                "1889670476619550724," +
                "1889670476619550725," +
                "1889670476619550726," +
                "1889670476623745025," +
                "1889670476623745026," +
                "1889670476623745027," +
                "1889670476623745028," +
                "1889670476623745029," +
                "1889670476623745030," +
                "1889670476623745031," +
                "1889670476623745032," +
                "1889670476623745033," +
                "1889670476623745034," +
                "1889670476623745035," +
                "1889670476623745036";
        String[] userIdArray = s.split(",");
        Random random = new Random();
        Instant start = LocalDate.of(2024, 12, 15).atStartOfDay(ZoneId.systemDefault()).toInstant();
        Instant end = Instant.now();
        for (String userId : userIdArray) {
            int randomNumber = random.nextInt(100);
            List<Post> list = new ArrayList<>();
            for (int i = 0; i < randomNumber; i++) {
                Instant randomCreateTime = start.plusSeconds(random.nextLong(end.getEpochSecond() - start.getEpochSecond()));
                list.add(new Post()
                        .setUserId(Long.valueOf(userId))
                        .setTitle("这是标题" + (1000 + random.nextInt(9000)))
                        .setContent("这是动态内容" + (10000 + random.nextInt(90000)))
                        .setRandomOrder(UUID.randomUUID().toString())
                        .setCreateTime(randomCreateTime)
                        .setUpdateTime(randomCreateTime));
            }
            BatchMapperUtils.insertBatch(list, PostMapper.class);
        }
    }
}
